# 计算机系统结构历年填空题和简答题汇总

## 一、填空题
1. CISC 表示**复杂指令集计算机**，RISC 表示**精简指令集计算机**。
2. 采用**定向**技术可以解决写后读冲突，减少停顿时间。
3. 典型的动态调度算法包括**记分牌算法**和Tomasulo算法，前者硬件中记录的信息由三部分构成，即**指令状态表**、**功能部件状态表**和**结果寄存器状态表**。
4. 开发循环级并行性的常用方法是**循环展开**，限制循环结构并行性开发的一个重要因素是**循环携带相关**。判断循环中是否存在存储别名的方法是**GCD测试法**。
5. 实现并行查找的方法有两种：(1)用**相联存储器**实现；(2)用单体多字的按地址访问的存储器和比较器来实现。
6. LRU算法的硬件实现方法包括**堆栈法**和**比较对法**。（p201）
7. 现有的MIMD计算机分为两类，即**集中式共享存储器多处理机**（或者**对称式共享存储器多处理机**）和**分布式存储器多处理机**，分别采用的Cache一致性协议是 **监听式协议**和**目录式协议**。
8. 2017年ACM图灵奖授予了斯坦福大学前校长John L. Hennessy和加州大学伯克利分校退休教授David A. Patterson，以表彰他们在**RISC**方面取得的成就，其中，Patterson的另外一个很重要的贡献是提出了**RAID**，提高了存储系统的性能和可靠性。
9. 2020年单价4000元一部的手机，它的性能不亚于1993年售价5000万美元的全球最快的电脑。电脑性能快速发展的主要原因来自于两个方面：**计算机制造技术的发展**和**计算机系统结构的创新**。（课本第一页）
10. 冯·诺依曼结构以**运算器**为中心。
11. 减少分支延迟的方法有**预测分支成功**、**预测分支失败**、**延迟分支**
12. Cache的写策略包括**写回法**和**写直达法**。
13. 解决Cache一致性问题的方法是**写作废协议**和**写更新协议**。
14. 系统的可靠性通常用**MTTF**来衡量，系统的可用性用**MTTF/(MTTF+MTTR)** 来衡量。（课本p244）
15. 2018年美国制裁中兴事件反映了我国在（​芯片制造）和（基础软硬件）领域的不足。（存疑）
16. 由软件实现的机器称为**虚拟机**。在一个计算机系统中，低层机器的属性对高层机器的程序员往往是**透明**的。
17. 平均码长最短的编码是**哈夫曼（Huffman）编码**；在早期计算机上，为了便于分级译码，一般采用**等长扩展码**。
18. 磁盘阵列中，RAID4和RAID5的小写请求需要进行**4**次磁盘方法，RAID6需要**6**次磁盘访问。
    + *解析：*
    + *raid4/5，需要读取数据盘，校验盘，然后更改数据盘，根据异或计算新的校验值，修改校验盘*
    + 对于raid6,一个很小的数据需要修改，那么有两个对应的校验值。读取数据，读取校验1,读取校验2，然后根据异或计算新的校验，写入新数据，写入新校验1, 写入新校验2
19. Omega网络的开关模块均采用**单元**控制方式，级间互连采用**均匀洗牌**连接方法。
20. 在小规模的多处理机系统中，通常会**监听**协议而非**目录**协议跟踪记录共享数据块的状态。
21. 磁盘阵列的组成可以根据哪两个特征区分?
（1）数据交叉存放的粒度
（2）冗余数据的计算方法以及在磁盘阵列的存放方式

## 二、简答题

1. 简述什么是计算机系统结构？
   - 计算机系统结构是指传统机器程序员所看到的计算机属性，即概念性结构与功能特性。它确定了**计算机系统中软硬件的界面**，界面之上由软件实现，界面之下由硬件和固件实现。简言之，系统结构是软硬件交互的接口，定义了指令集、数据表示、存储结构等核心功能特性。

2. 按照Flynn分类法可以把计算机系统的结构分为哪4类？
   - 单指令流单数据流SISD、单指令流多数据流SIMD、多指令流单数据流MISD、多指令流多数据流MIMD

3. 计算机组成与计算机实现的区别：
   + 计算机组成：计算机系统结构的逻辑实现
   包含物理机器级中的数据流和控制流的组成以及逻辑设计等。
   着眼于：物理机器级内各事件的排序方式与控制方式、各部件的功能以及各部件之间的联系。
   + 计算机实现：计算机组成的物理实现
   包括处理机、主存等部件的物理结构，器件的集成度和速度，模块、插件、底板的划分与连接，信号传输，电源、冷却及整机装配技术等。
   着眼于：器件技术（起主导作用）、微组装技术。
   （PPT第1章）

4. 根据CPU性能公式说明如何提高CPU的性能？
    * 根据CPU性能公式，有三种方法。
    （1）提高CPU的时钟频率，即降低单位时钟周期的时间。
    （2）改进计算机组成和指令系统结构，降低CPU的CPI。
    （3）改进指令系统结构和编译技术，降低IC。

5. 什么是CISC和RISC？
   - CISC：复杂指令集计算机
   - RISC：精简指令集计算机

6. 简述CISC指令集结构存在的问题。
   * 各种指令的使用频度相差悬殊，许多指令很少用。
   * 指令系统庞大，指令条数很多，许多指令的功能又很复杂，使得控制器硬件非常复杂。
   * 操作繁杂，其CPI值比较大，执行速度慢
   * 指令功能复杂，规整性不好，不利于采用流水技术来提高性能。

7. 简述RISC指令集结构的设计原则。（课本p45）
   * (1) **指令条数少，指令功能简单**。确定指令系统时，只使用频度很高的指令，在此基础上补充一些最有用的指令(如支持操作系统和高级语言实现的指令)。
   * (2) 采用**简单而又统一**的**指令格式**，并减少寻址方式，指令字长都为32位或64位。
   * (3) 指令的执行在**单周期**内完成(采用流水线技术后)。
   * (4) 采用**load-store结构**，即只有load和store指令**才能访问存储器**，其他指令的操作都是在**寄存器**之间进行的。
   * (5) 大多数指令都采用**硬连逻辑**来实现。
   * (6) **强调优化编译器**的作用，为高级语言程序生成优化的代码。
   * (7) 充分利用**流水线**技术来提高性能。

8. 什么是指令的静态调度和动态调度？记分牌动态调度方法中记分牌中记录包括哪3个部分信息？
   - **静态调度**：不是在程序执行的过程中，而是在编译期间进行代码调度和优化的
   - **动态调度**：在程序的执行过程中，依靠专门硬件对代码进行调度
   - 3个部分：指令状态表、功能部件状态表、结果寄存器状态表Result

9.  什么是多处理机的Cache一致性问题？MIMD计算机的两类机器分别采用哪种Cache一致性协议，并做简单描述？
   - 存储器的一致性：如果对某个数据项的任何读操作均可得到其最新写入的值，则认为这个存储系统是一致的。（PPT）
   - **多处理机的Cache一致性问题**：如果允许共享数据进入cache，就可能出现多个处理器的Cache中都有同一存储块的副本的情况，当其中某个处理器对其Cache中的数据进行修改后，就会使得其Cache中的数据与其他Cache中不一致（课本P304）
   - 对称式共享存储器多处理机：监听式协议（课本P304）
   - 分布式存储器多处理机：目录式协议（课本P312）

10. 什么是超标量、超长指令字、超流水线处理机？
   - **超标量处理机**：在每个时钟周期流出的指令条数不固定，依代码的具体情况而定。
   - **超长指令字处理机**：在每个时钟周期流出的指令条数是固定的，这些指令构成一条长指令或者一个指令包。
   - **超流水线处理机**：在一个时钟周期内能够分时流出多条指令。

11. 根据你所掌握的知识，试说明如何降低Cache不命中率？
   - 减少强制性不命中：增加块的大小
   - 减少容量不命中：增加Cache容量
   - 减少冲突不命中：增加相联度

12. 简述多核架构与多处理器有什么不同。
   - 多处理器指多个CPU，每个CPU可以是单核或多核的。

13. 阐述Cache的两种写策略，并谈谈它们各自的优点。
   + 写直达法（也称为存直达法）
     + 执行"写"操作时，不仅写入Cache，也写入下一级存储器。
     + 保证下一级存储器中的数据都是最新的。
   + 写回法（也称为拷回法）
     + 执行"写"操作时，只写入Cache，不写入下一级存储器。
     + 有些数据的最新版本在Cache中，仅当Cache中相应的块被替换时，才写回主存。
     + 设置"修改位"：当一个块被替换时，若没有被修改过，则不必写回到下一级存储器（减少在替换时数据块的写回）。
   + 写回法的优点：速度快，所使用的存储器带宽较低。
     + "写"操作能以Cache的速度进行，"写"只到达Cache；
     + 对同一单元的多次写，只需一次写回下一级存储器（减少内存访问）。
   + 写直达法的优点：易于实现，一致性好。

14. 什么是多核技术？列举多核系统的4种典型的组织结构。
   
   * 多核技术是指在一枚处理器中集成两个或多个完整的计算内核，从而提高计算能力的技术。
   * 专用L1 Cache多核架构
   * 专用L2 Cache多核架构
   * 共享L2 Cache多核架构
   * 共享L3 Cache多核架构

15. 减少命中时间的方法：
   - 使用容量小且结构简单的cache
   - 使用虚拟cache

16. 采用动态分支预测技术的目的是什么？在所采用的方法中，需要解决哪两个关键问题？（课本p134）
    - 采用动态分支预测技术的目的
      - 预测分支是否成功；
      - 尽快找到分支目标地址（或指令），从而避免控制相关造成流水线停顿。
    - 需要解决的关键问题
      - 如何记录分支的历史信息，要记录哪些信息？
      - 如何根据这些信息来预测分支的去向，甚至提前取出分支目标处的指令？

17. 在有Cache的计算机系统中，进行I/O操作时，会产生哪两种数据不一致问题？如何克服？（课本p264）
    * 两种数据不一致问题
      * (1) 对于写回法来说，CPU 修改了 Cache 的内容后，由于存储器的内容跟不上 Cache 内容的变化，I/O 系统进行输出操作时所看到的数据是旧值。
      * (2) I/O 系统进行输入操作后，存储器的内容发生了变化，但 CPU 在 Cache 中所看到的内容依然是旧值
    * 如何克服
      * 软件方法：设法保证 I/O 缓冲器中的所有块都不在 Cache 中。具体做法有两种，一种是把 I/O 缓冲器的页面设置为不可进入 Cache，在进行输入操作时，操作系统总是把输入的数据放到该页面。另一种方法是在进行输入操作之前，操作系统先把 Cache 中与 I/O 缓冲器相关的数据“赶出”Cache，即把相应的数据块设置为“无效”状态。当然，如果是采用写回法的 Cache，而且该数据块被修改过，就还需要把整块的内容写回存储器。
      * 硬件方法：硬件的方法是在进行输入操作时，检查相应的 I/O 地址（I/O 缓冲器中的单元）是否在 Cache 中（即是否有数据副本）。这是通过把这些 I/O 地址与 Cache 中的标识进行比较来判断的。为了使这些比较能与 CPU 对 Cache 的访问并行进行，可以多设置一套完全相同的标识存储器。如果发现 I/O 地址在 Cache 中有匹配，就把相应的 Cache 块设置为“无效”。

    * 概括（要不然背不下来一点）：Cache一致性问题可通过软件和硬件方法解决。
      1. **软件方法**：确保I/O缓冲器数据不在Cache中。方法包括设置I/O页面不可缓存，或在输入前清除相关Cache数据。
      2. **硬件方法**：在输入操作时检查I/O地址是否在Cache中。通过比较I/O地址和Cache标识判断。若地址匹配，将Cache块设为无效。
