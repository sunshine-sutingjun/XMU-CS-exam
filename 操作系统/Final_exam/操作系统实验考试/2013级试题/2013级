
操作系统实验考试 2016.6.14
   在目录“/home/zhengw/exam”下有本文件，程序文件“threadtest.cc”，
   “mybuf.h”和“mybuf.cc”。
   程序mybuf.cc实现一个公用缓存区的生产者消费者模型，描述如下：
1、公用缓冲区是用mybuf.cc中所声明的整型动态数组 pbuf 所实现。
2、函数BufCreater()为数组pbuf分配空间，分配前发生上下文切换。
2、函数BufProducer()按照函数内定义的规则向pbuf中按序插入5个数据，
   当参数“which”是偶数时，插入不大于10的5个正整数，否则插入5个
   不大于10的正奇数。在插入数据的过程中，它进行上下文切换，使得
   其他线程可以并发地运行。
4、函数BufConsumer()将一个有10个元素的缓冲区，按照插入的相反顺序将
   数据删除，并按删除顺序打印这些数据。
5、函数ThreadTest()基于以上函数创建两个生产者线程和一个消费者线程，
   自己负责创建pbuf数组。

问题：
我们希望程序的输出是: 10 9 8 7 6 5 4 3 2 1
但是程序mybuf中缺少若干语句，因此无法运行。本次考试的内容是，
在程序文件mybuf.cc中填加适当语句，使程序按期望地那样运行。

要求：
1、修改时只能在两个注释指定的位置添加语句，不能删除或注释掉
   现有的语句，不允许增加新的函数。
2、在你的起始目录下创建目录“exam”(不含引号，全部小写)。
   将结果，即目录code下的文件Makefile.common，
   目录threads下的文件Makefile，mybuf.cc和nachos，以及
   其他被修改的文件，拷贝至目录exam中。目录exam中不要包含
   除了上述文件外的其他文件和目录。
3、开卷考试，但是不能互相讨论、抄袭，绝对禁止使用手机以及即时
   通讯工具。
   
请严格按上述要求完成考试，否则将没有实验成绩。

建议：为了避免以前系统的干扰，可以重新安装一个新的Nachos系统，
并在此系统内调试程序。为了防止新系统覆盖原来的系统，可先将原
系统的目录更名或安装于不同的目录。